#!/usr/bin/env python
"""
Convenience script so that you don't need to install before testing.

Copyright 2019 Markus Wallerberger.
Released under the GNU Lesser General Public License, Version 3 only.
See LICENSE.txt for permissions on usage, modification and distribution
"""
from __future__ import print_function
import sys
import os, os.path

import pytest
import pylint.lint

HEREPATH = os.path.dirname(os.path.realpath(__file__))

if __name__ == '__main__':
    srcdir = os.path.join(HEREPATH, os.pardir, "src")
    testsdir = os.path.join(HEREPATH, os.pardir, "tests")
    sys.path.append(srcdir)
    rc = pytest.main([testsdir])
    if rc != 0:
        sys.exit(1)
    print("Running pylint ...")
    pylint.lint.Run(['-E', os.path.join(srcdir, "fsource")])
